<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="site.metacoding.firstapp.domain.BuyDao">


	<select id="buyList"
		resultType="site.metacoding.firstapp.web.dto.request.buy.BuyListDto">
		SELECT b.id,p.product_name, b.buy_qty, p.product_price, b.created_at
		FROM
		buy b
		INNER JOIN product p
		ON b.product_id = p.product_id
		WHERE
		b.users_id = #{usersId}
	</select>

	<insert id="insert">
		insert into buy(product_id, users_id,
		buy_qty,created_at)
		values(#{productId}, #{id}, #{buyQty}, NOW())
	</insert>


</mapper>